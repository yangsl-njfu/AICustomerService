# 需求文档：智能毕业设计交易平台

## 简介

智能毕业设计交易平台是一个面向大学生的毕业设计作品交易市场，集成了 AI 智能客服系统。学生可以在平台上购买或出售毕业设计作品，AI 客服帮助买家了解产品、解答疑问、推荐合适的作品。

**核心价值：**
- 为需要毕业设计参考的学生提供高质量作品
- 为有能力的学生提供变现渠道
- 通过 AI 客服提升用户体验和转化率

**技术栈：**
- 前端：Vue 3 + TypeScript + Vite + Pinia
- 后端：FastAPI + Python 3.10+
- AI：LangChain 1.2.7 + LangGraph 1.0.7
- 数据库：SQLite/MySQL + Chroma + Redis

## 术语表

- **买家（Buyer）**：购买毕业设计作品的学生
- **卖家（Seller）**：出售毕业设计作品的学生/开发者
- **商品（Product）**：毕业设计作品
- **订单（Order）**：购买交易记录
- **AI客服（AI Assistant）**：智能对话助手
- **知识库（Knowledge Base）**：商品信息、FAQ 等
- **购物车（Cart）**：临时存储待购买商品
- **评价（Review）**：买家对商品的评分和评论

## 用户角色

### 1. 买家（Buyer）
- 浏览商品、搜索商品
- 添加购物车、下单购买
- 咨询 AI 客服
- 评价商品

### 2. 卖家（Seller）
- 发布商品、管理商品
- 查看订单、处理订单
- 查看收入统计
- 回复评价

### 3. 管理员（Admin）
- 审核商品
- 管理用户
- 处理纠纷
- 查看平台数据
- 管理 AI 知识库

## 需求

### 需求 1：用户注册与认证

**用户故事：** 作为用户，我希望能够注册账号并登录系统，以便使用平台功能。

#### 验收标准

1. WHEN 用户访问平台 THEN 系统 SHALL 显示注册/登录入口
2. WHEN 用户注册时 THEN 系统 SHALL 要求提供用户名、密码、邮箱
3. WHEN 用户注册成功 THEN 系统 SHALL 创建账户并自动登录
4. WHEN 用户登录时 THEN 系统 SHALL 验证凭据并返回 JWT 令牌
5. WHEN 用户选择角色时 THEN 系统 SHALL 支持买家和卖家角色切换
6. THE 系统 SHALL 使用 bcrypt 加密存储密码

### 需求 2：商品分类管理

**用户故事：** 作为管理员，我希望能够管理商品分类，以便组织平台商品。

#### 验收标准

1. WHEN 管理员创建分类 THEN 系统 SHALL 支持多级分类结构
2. THE 系统 SHALL 支持以下主分类：
   - 计算机类（Web开发、移动应用、数据分析、AI项目）
   - 电子类（嵌入式、硬件设计、信号处理）
   - 管理类（管理系统、数据可视化）
3. WHEN 用户浏览商品 THEN 系统 SHALL 按分类展示商品
4. THE 系统 SHALL 为每个分类提供图标和描述

### 需求 3：商品发布与管理

**用户故事：** 作为卖家，我希望能够发布和管理我的毕业设计作品，以便出售。

#### 验收标准

1. WHEN 卖家发布商品 THEN 系统 SHALL 要求填写：
   - 标题、描述、价格
   - 分类、技术栈、难度等级
   - 封面图片、演示视频
2. WHEN 卖家上传商品文件 THEN 系统 SHALL 支持源码、文档、数据库文件
3. WHEN 商品发布后 THEN 系统 SHALL 设置状态为"待审核"
4. WHEN 卖家编辑商品 THEN 系统 SHALL 允许修改商品信息
5. WHEN 卖家下架商品 THEN 系统 SHALL 将商品状态设为"已下架"
6. THE 系统 SHALL 记录商品浏览量和销售量

### 需求 4：商品展示与搜索

**用户故事：** 作为买家，我希望能够浏览和搜索商品，以便找到合适的毕业设计。

#### 验收标准

1. WHEN 买家访问首页 THEN 系统 SHALL 展示推荐商品和热门商品
2. WHEN 买家搜索商品 THEN 系统 SHALL 支持关键词搜索
3. WHEN 买家筛选商品 THEN 系统 SHALL 支持按分类、价格、难度筛选
4. WHEN 买家排序商品 THEN 系统 SHALL 支持按价格、销量、评分排序
5. WHEN 买家查看商品详情 THEN 系统 SHALL 显示：
   - 商品信息、价格、技术栈
   - 演示视频、预览图片
   - 卖家信息、评价列表
6. THE 系统 SHALL 记录用户浏览历史

### 需求 5：购物车功能

**用户故事：** 作为买家，我希望能够将商品添加到购物车，以便批量购买。

#### 验收标准

1. WHEN 买家添加商品到购物车 THEN 系统 SHALL 保存购物车数据
2. WHEN 买家查看购物车 THEN 系统 SHALL 显示商品列表和总价
3. WHEN 买家修改购物车 THEN 系统 SHALL 支持删除商品
4. WHEN 买家结算 THEN 系统 SHALL 跳转到订单确认页面
5. THE 系统 SHALL 在用户登录后同步购物车数据

### 需求 6：订单创建与支付

**用户故事：** 作为买家，我希望能够创建订单并完成支付，以便购买商品。

#### 验收标准

1. WHEN 买家确认订单 THEN 系统 SHALL 创建订单并生成订单号
2. WHEN 订单创建后 THEN 系统 SHALL 显示订单详情和支付方式
3. WHEN 买家选择支付方式 THEN 系统 SHALL 支持支付宝、微信支付（模拟）
4. WHEN 支付成功 THEN 系统 SHALL 更新订单状态为"已支付"
5. WHEN 支付失败 THEN 系统 SHALL 保持订单状态为"待支付"
6. THE 系统 SHALL 在支付成功后发送通知给卖家

### 需求 7：订单管理

**用户故事：** 作为买家/卖家，我希望能够查看和管理订单，以便跟踪交易状态。

#### 验收标准

1. WHEN 买家查看订单 THEN 系统 SHALL 显示所有订单列表
2. WHEN 买家查看订单详情 THEN 系统 SHALL 显示：
   - 订单号、商品信息、总价
   - 订单状态、支付时间、交付时间
3. WHEN 卖家查看订单 THEN 系统 SHALL 显示待处理订单
4. WHEN 卖家交付商品 THEN 系统 SHALL 更新订单状态为"已交付"
5. WHEN 买家确认收货 THEN 系统 SHALL 更新订单状态为"已完成"
6. THE 系统 SHALL 支持订单状态：待支付、已支付、已交付、已完成、已取消

### 需求 8：商品评价系统

**用户故事：** 作为买家，我希望能够评价购买的商品，以便帮助其他买家。

#### 验收标准

1. WHEN 订单完成后 THEN 系统 SHALL 允许买家评价商品
2. WHEN 买家评价时 THEN 系统 SHALL 要求提供：
   - 星级评分（1-5星）
   - 文字评论
   - 图片（可选）
3. WHEN 评价提交后 THEN 系统 SHALL 更新商品评分和评价数
4. WHEN 卖家查看评价 THEN 系统 SHALL 允许卖家回复评价
5. WHEN 买家查看商品 THEN 系统 SHALL 显示评价列表
6. THE 系统 SHALL 计算商品平均评分

### 需求 9：AI 智能客服 - 商品推荐

**用户故事：** 作为买家，我希望 AI 客服能够根据我的需求推荐合适的毕业设计。

#### 验收标准

1. WHEN 买家咨询 AI 客服 THEN 系统 SHALL 识别用户需求（专业、技术栈、预算）
2. WHEN AI 识别到推荐意图 THEN 系统 SHALL 从商品库检索匹配商品
3. WHEN AI 推荐商品 THEN 系统 SHALL 提供：
   - 商品标题、价格、评分
   - 推荐理由
   - 商品链接
4. WHEN 买家询问对比 THEN 系统 SHALL 对比多个商品的优缺点
5. THE 系统 SHALL 基于用户浏览历史优化推荐

### 需求 10：AI 智能客服 - 商品咨询

**用户故事：** 作为买家，我希望 AI 客服能够回答商品相关问题。

#### 验收标准

1. WHEN 买家询问商品详情 THEN AI SHALL 从商品信息中提取答案
2. WHEN 买家询问技术栈 THEN AI SHALL 解释技术栈和难度
3. WHEN 买家询问交付内容 THEN AI SHALL 说明包含的文件和文档
4. WHEN 买家询问使用方法 THEN AI SHALL 提供使用指导
5. THE AI SHALL 引用商品描述和评价作为信息来源

### 需求 11：AI 智能客服 - 购买指导

**用户故事：** 作为买家，我希望 AI 客服能够指导我完成购买流程。

#### 验收标准

1. WHEN 买家询问如何购买 THEN AI SHALL 说明购买步骤
2. WHEN 买家询问支付方式 THEN AI SHALL 介绍支持的支付方式
3. WHEN 买家询问退款政策 THEN AI SHALL 说明退款规则
4. WHEN 买家遇到问题 THEN AI SHALL 提供解决方案或创建工单

### 需求 12：AI 智能客服 - 订单查询

**用户故事：** 作为买家，我希望 AI 客服能够帮我查询订单状态。

#### 验收标准

1. WHEN 买家询问订单状态 THEN AI SHALL 查询订单信息
2. WHEN AI 查询订单 THEN 系统 SHALL 返回订单状态和详情
3. WHEN 订单异常 THEN AI SHALL 提供处理建议
4. THE AI SHALL 保护用户隐私，仅显示用户自己的订单

### 需求 13：卖家中心

**用户故事：** 作为卖家，我希望有一个卖家中心，以便管理我的商品和订单。

#### 验收标准

1. WHEN 卖家访问卖家中心 THEN 系统 SHALL 显示：
   - 商品列表、订单列表
   - 收入统计、销售数据
2. WHEN 卖家查看数据 THEN 系统 SHALL 提供图表展示
3. WHEN 卖家管理商品 THEN 系统 SHALL 支持批量操作
4. THE 系统 SHALL 实时更新数据

### 需求 14：管理后台

**用户故事：** 作为管理员，我希望有一个管理后台，以便管理平台。

#### 验收标准

1. WHEN 管理员登录 THEN 系统 SHALL 验证管理员权限
2. WHEN 管理员查看数据 THEN 系统 SHALL 显示：
   - 用户统计、商品统计、订单统计
   - 收入统计、评价统计
3. WHEN 管理员审核商品 THEN 系统 SHALL 显示待审核商品列表
4. WHEN 管理员处理纠纷 THEN 系统 SHALL 提供纠纷处理工具
5. THE 管理员 SHALL 能够管理 AI 知识库

### 需求 15：收藏功能

**用户故事：** 作为买家，我希望能够收藏感兴趣的商品，以便后续查看。

#### 验收标准

1. WHEN 买家收藏商品 THEN 系统 SHALL 保存收藏记录
2. WHEN 买家查看收藏 THEN 系统 SHALL 显示收藏的商品列表
3. WHEN 买家取消收藏 THEN 系统 SHALL 删除收藏记录
4. THE 系统 SHALL 在商品详情页显示收藏状态

### 需求 16：通知系统

**用户故事：** 作为用户，我希望能够收到重要通知，以便及时了解订单状态。

#### 验收标准

1. WHEN 订单状态变更 THEN 系统 SHALL 发送通知
2. WHEN 收到评价 THEN 系统 SHALL 通知卖家
3. WHEN 商品审核通过 THEN 系统 SHALL 通知卖家
4. THE 系统 SHALL 支持站内消息通知

### 需求 17：数据统计与分析

**用户故事：** 作为管理员/卖家，我希望能够查看数据统计，以便了解业务情况。

#### 验收标准

1. WHEN 查看统计数据 THEN 系统 SHALL 提供：
   - 销售额统计（日/周/月）
   - 商品销量排行
   - 用户活跃度
2. THE 系统 SHALL 使用图表展示数据
3. THE 系统 SHALL 支持数据导出

### 需求 18：安全与权限

**用户故事：** 作为平台，我希望系统能够保护用户数据和交易安全。

#### 验收标准

1. THE 系统 SHALL 使用 HTTPS 加密通信
2. THE 系统 SHALL 使用 JWT 进行身份验证
3. THE 系统 SHALL 对敏感操作进行权限验证
4. THE 系统 SHALL 记录审计日志
5. THE 系统 SHALL 防止 SQL 注入和 XSS 攻击

### 需求 19：性能优化

**用户故事：** 作为用户，我希望系统响应快速，以便流畅使用。

#### 验收标准

1. WHEN 用户访问首页 THEN 系统 SHALL 在 2 秒内加载完成
2. WHEN 用户搜索商品 THEN 系统 SHALL 在 1 秒内返回结果
3. THE 系统 SHALL 使用 Redis 缓存热门数据
4. THE 系统 SHALL 使用 CDN 加速静态资源
5. THE 系统 SHALL 支持图片懒加载

### 需求 20：移动端适配

**用户故事：** 作为用户，我希望能够在手机上使用平台。

#### 验收标准

1. THE 前端 SHALL 使用响应式设计
2. THE 前端 SHALL 在移动设备上正常显示
3. THE 前端 SHALL 优化移动端交互体验

## 非功能性需求

### 可用性
- 系统可用性 >= 99%
- 支持 100 并发用户

### 可扩展性
- 支持水平扩展
- 模块化设计

### 可维护性
- 代码注释完整
- API 文档完善
- 日志记录详细

### 兼容性
- 支持 Chrome、Firefox、Safari、Edge 最新版本
- 支持 iOS 和 Android 移动浏览器
